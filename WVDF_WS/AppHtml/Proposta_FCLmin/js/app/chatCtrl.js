"use strict";app.controller("chatCtrl",["$scope","WVDF",function(n,t){n.chat={messages:[],form:{},history:[]};var i=function(){Url.idProposta&&n.chat.getMessages()};n.chat.getMessages=function(){Url.idProposta!=""&&Url.idProposta!=0&&t.ws_hsag558.f_listacomments(Url.idProposta,Url.aUsuarioSessao).then(function(t){n.chat.messages=t})};n.chat.sendMsg=function(i,r){if(Url.idProposta==""||Url.idProposta==0){parent.parent.alertify.error("Proposta Invalida!");return}t.ws_hsag558.f_savecomments(Url.idProposta,i,r,Url.aUsuarioSessao).then(function(){n.chat.getMessages()})};n.chat.openHistorico=function(){t.ws_hsag558.f_full_msgs(Url.idProposta,Url.aUsuarioSessao).then(function(t){n.chat.history=t})};i()}])